<!DOCTYPE html>
<html>

<meta charset="utf-8">

<link rel="stylesheet" href="css/style.css"></link>

<head>
    <title>ArticleHunter</title>
</head>

<body>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
        var myurl = location.host;
        var socket = io.connect(myurl);
        console.log("in business");

        function sendFeeds() {
          socket.emit('feed', {feedParams: rssForm.feedsBox.value});
        }

        function sendKeywords() {
          socket.emit('keyword', {keywordParams: rssForm.keywordsBox.value})
        }

        function begin() {
          socket.emit('begin')
        }

        function appendKeywordsList() {
          xmlhttp = new XMLHttpRequest();
          xmlhttp.open("GET", "http://localhost:3000/getkeywords", true);
          xmlhttp.onreadystatechange=function() {
            if (xmlhttp.readyState==4 && xmlhttp.status==200) {
              var ul = document.getElementById("keywordsScrollList");
              var li = document.createElement("li");
              li.appendChild(document.createTextNode(xmlhttp.responseText));
              ul.appendChild(li);
            }
          }
          xmlhttp.send();
        }

        function appendFeedsList() {
          xmlhttp = new XMLHttpRequest();
          xmlhttp.open("GET", "http://localhost:3000/getfeeds", true);
          xmlhttp.onreadystatechange=function() {
            if (xmlhttp.readyState==4 && xmlhttp.status==200) {
              var ul = document.getElementById("feedsScrollList");
              var li = document.createElement("li");
              console.log(xmlhttp.responseText);
              li.appendChild(document.createTextNode(xmlhttp.responseText));
              ul.appendChild(li);
            }
          }
          xmlhttp.send();
        }

    </script>

<div class="headerDiv">
    <span class="titleHeader">ArticleHunter</span>
    <span class="gitHeader">
    <a href="https://github.com/JulienArnold/consum-rss-trawler">Go to Github</a>
    </span>
</div>

<div class="row">

  <div id="inputFormDiv" class="col-1">
    <form id="rssForm">
        <h2>Feeds</h2><br>
        <input type="text" id="feedsBox"><input type="button" id="feedsButton" value="Add" onclick="sendFeeds(); appendFeedsList()"><br>
        <h2>Additional Keywords</h2><br>
        <input type="text" id="keywordsBox"><input type="button" id="keywordsButton" value="Add" onclick="sendKeywords(); appendKeywordsList()"><br>
        <input type="submit" id="startButton" value="Submit" onclick="begin()"><br>
    </form>
  </div>

  <div id="scrollDiv" class="col-2">
    <h2>Active Feeds</h2>
    <nav id="feedsScroll" class="scroll">
      <ul id="feedsScrollList">
      </ul>
    </nav>
  </div>

    <div id="scrollDiv2" class="col-2">
      <h2>Active Keywords</h2>
      <nav id="keywordsScroll" class="scroll">
        <ul id="keywordsScrollList">
        </ul>
      </nav>
    </div>

</div>

<div class="row">
  <div id="redirectDiv" class="col-3">
    <h2>Results (Auto)</h2>
    <a class="resultsLink" href="http://localhost:3000/results/auto">Automated Results</a>
  </div>

  <div id="redirectDiv2" class="col-3">
    <h2>Results</h2>
    <a class="resultsLink" href="http://localhost:3000/results/manual">Manual Results</a>
  </div>
</div>

</body>

</html>
